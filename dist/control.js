"use strict";exports.__esModule=!0;var Control=function(){function t(){this.rect=[160,160],this.moveRect=[50,50],this.elemPosition=[10,10],this.angle=0}return t.prototype.create=function(){return this.elem=document.createElement("div"),this.elem.className="control",this.elem.style.position="absolute",this.elem.style.width=this.rect[0]+"px",this.elem.style.height=this.rect[1]+"px",this.elem.style.left=this.elemPosition[0]+"%",this.elem.style.bottom=this.elemPosition[1]+"%",this.moveElem=document.createElement("div"),this.moveElem.className="move",this.moveElem.style.position="absolute",this.moveElem.style.width=this.moveRect[0]+"px",this.moveElem.style.height=this.moveRect[1]+"px",this.elem.appendChild(this.moveElem),this.moveCenter=this.moveRect.map(function(t){return t/2}),this.elemCenter=this.rect.map(function(t){return t/2}),this.resetPos(),this.bindEvent(),this.elem},t.prototype.resetPos=function(){this.toPosition=[0,0],this.transPosition()},t.prototype.transPosition=function(){var t=this.elemCenter[0]-this.moveCenter[0]+this.toPosition[0],e=this.elemCenter[1]-this.moveCenter[1]-this.toPosition[1];this.moveElem.style.left=t+"px",this.moveElem.style.top=e+"px"},t.prototype.bindEvent=function(){this.elem.addEventListener("touchstart",function(t){var e=t.touches[0]||t;this.setPosition(e)}.bind(this),!1),this.elem.addEventListener("touchmove",function(t){var e=t.touches[0]||t;this.setPosition(e)}.bind(this),!1),this.elem.addEventListener("touchend",function(t){this.resetPos()}.bind(this),!1)},t.prototype.setPosition=function(t){this.position=[this.elem.offsetLeft,this.elem.offsetTop];var e=t.pageX-this.position[0],i=t.pageY-this.position[1],s=e-this.elemCenter[0],o=-(i-this.elemCenter[1]);console.log(s,o);var n=Math.atan2(o,s),h=Math.sqrt(s*s+o*o),l=this.elemCenter[0]-this.moveCenter[0];if(h>l){var m=Math.cos(n)*l,r=Math.sin(n)*l;s=m,o=r}this.toPosition=[s,o],this.transPosition()},t.prototype.getAngle=function(){return this.angle=Math.atan2(this.toPosition[1],this.toPosition[0]),this.angle},t.prototype.remove=function(){this.elem.parentNode.removeChild(this.elem)},t}();exports.default=Control;
//# sourceMappingURL=control.js.map
