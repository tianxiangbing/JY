var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e])};return function(i,e){function o(){this.constructor=i}t(i,e),i.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();!function(){var t=function(t){function e(){var i=null!==t&&t.apply(this,arguments)||this;return i.count=1,i.v=2,i.ballList=[],i.score=0,i}return __extends(e,t),e.prototype.newGame=function(){this.count=1,this.v=2,this.score=0,this.ballList=[],this.createRole(),t.prototype.newGame.call(this),this.control()},e.prototype.running=function(){t.prototype.running.call(this),this.count++,this.role.draw(),this.ballList.forEach(function(t){t.draw()}),this.createBoll(),this.scoreScreen.change("您已行驶 "+this.score+" 米"),this.drop(),this.checkHits()},e.prototype.checkHits=function(){var t=this;this.ballList.forEach(function(i){t.hits(t.role,i)&&t.over()})},e.prototype.gameOver=function(){t.prototype.gameOver.call(this),this.gameOverStage.setText("得分："+this.score)},e.prototype.loading=function(){console.log("loading..."),t.prototype.loading.call(this)},e.prototype.createRole=function(){this.role=new Sprite(this.context,"car.png");var t=this.stage.width/3-10;this.role.setSize(t,t);this.stage.width,this.role.w;this.jump(1,this.role)},e.prototype.control=function(){this.stage.bindEvent(function(t){var i=this.stage.width,e=(this.stage.height,Math.ceil(t[0]/(i/3)));this.jump(e,this.role)}.bind(this))},e.prototype.jump=function(t,i){var e=this.stage.width/3*t-this.stage.width/3/2-this.role.w/2;i.setPosition(e,this.stage.height/2+this.role.h)},e.prototype.setBallInitPosition=function(t,i){var e=this.stage.width/3*i-this.stage.width/3/2-t.w/2;t.setPosition(e,0)},e.prototype.createBoll=function(){if(this.count%100==0){this.v=Math.min(this.v+.3,5),this.score++;for(var t=[1,2,3],e=Math.ceil(2*Math.random()),o=0;;){var s=new i(this.context,this.stage.width/3-10,this.stage.width/4),n=Math.floor(Math.random()*t.length);if(this.setBallInitPosition(s,t[n]),this.ballList.push(s),t.splice(n,1),++o>=e)break}}},e.prototype.drop=function(){var t=this;this.ballList.forEach(function(i,e){i.drop(t.v),i.x>t.stage.height&&t.ballList.splice(e,1)})},e}(JY),i=function(t){function i(i,e,o){var s=t.call(this,i,"car1.png")||this;return s.setSize(e,o),s}return __extends(i,t),i.prototype.drop=function(t){this.setPosition(this.x,this.y+t)},i}(Sprite),e=document.getElementById("view"),o=e.offsetWidth,s=e.offsetHeight,n=new Stage(o,s),r=new Discript("start");r.text='<p class="title">碰撞汽车</p>';var h=new GameOver("restart"),a=new Title("碰撞汽车");(new Control).rect=[100,100];var c=new t(e,n,a,r,h);c.files={image:["car1.png","car2.png","car.png"]},c.setup()}();
//# sourceMappingURL=dropCars.js.map
